<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Giftup Pro üöÄ</title>
    <style>
        :root { --blue: #007aff; --green: #34c759; --red: #ff3b30; --bg: #000; --panel: #111; }
        body { background: var(--bg); color: white; font-family: sans-serif; margin: 0; overflow: hidden; }
        
        .header { padding: 15px; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #222; }
        .balance { background: var(--green); color: black; padding: 5px 15px; border-radius: 20px; font-weight: 800; }

        .history { display: flex; gap: 8px; padding: 12px; overflow-x: auto; background: #080808; border-bottom: 1px solid #1a1a1a; }
        .hs-item { padding: 4px 12px; border-radius: 8px; font-size: 13px; font-weight: bold; background: #1a1a1a; color: #888; }

        .game-area { height: 260px; background: #000; position: relative; display: flex; align-items: center; justify-content: center; overflow: hidden; }
        .multiplier { font-size: 65px; font-weight: 900; z-index: 10; }
        .timer-label { font-size: 20px; color: var(--blue); margin-bottom: 10px; font-weight: bold; }
        .rocket { width: 130px; position: absolute; bottom: 20px; left: 20px; z-index: 5; }

        .controls { padding: 20px; background: var(--panel); border-radius: 24px 24px 0 0; border-top: 1px solid #222; }
        input { width: 100%; background: #000; border: 1px solid #333; padding: 18px; color: white; border-radius: 14px; font-size: 20px; box-sizing: border-box; margin-bottom: 15px; outline: none; }
        .bet-btn { width: 100%; padding: 20px; border-radius: 16px; border: none; font-size: 20px; font-weight: 800; color: white; cursor: pointer; }

        .lobby { margin-top: 20px; height: 150px; overflow-y: auto; }
        .bet-row { display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #1a1a1a; font-size: 14px; color: #666; }
    </style>
</head>
<body>

    <div class="header">
        <span style="font-weight: 900;">GIFTUP</span>
        <div class="balance"><span id="bal">500.00</span> ‚Ç¥</div>
    </div>

    <div class="history" id="history"></div>

    <div class="game-area">
        <div style="text-align: center; z-index: 10;">
            <div id="status-text" class="timer-label">–î–æ –ø–æ—á–∞—Ç–∫—É:</div>
            <div id="mult" class="multiplier">5.0s</div>
        </div>
        <img id="rocket" class="rocket" src="https://files.catbox.moe/6v30h0.png" style="display:none;">
    </div>

    <div class="controls">
        <input type="number" id="bet-amount" value="100">
        <button id="action-btn" class="bet-btn" style="background: var(--blue);" onclick="handleAction()">–°–¢–ê–í–ö–ê</button>
        
        <div class="lobby">
            <div style="font-size: 11px; color: #444; margin-bottom: 5px;">–°–¢–ê–í–ö–ò –ì–†–ê–í–¶–Ü–í:</div>
            <div id="lobby-list">
                <div class="bet-row"><span>üë§ @user_77</span><span>150 ‚Ç¥</span></div>
                <div class="bet-row"><span>üë§ @pro_lucky</span><span>300 ‚Ç¥</span></div>
            </div>
        </div>
    </div>

    <script>
        let balance = 500.0;
        let myBet = 0;
        let gameStatus = "WAITING"; // WAITING, FLYING, CRASHED
        let currentMult = 1.00;
        let timerSeconds = 5;
        let gameLoop;

        // –ü–æ—á–∞—Ç–∫–æ–≤–∏–π —Ü–∏–∫–ª
        startWaitingPhase();

        function updateUI() {
            document.getElementById('bal').innerText = balance.toFixed(2);
        }

        // –ö–µ—Ä—É–≤–∞–Ω–Ω—è –∫–Ω–æ–ø–∫–æ—é
        function handleAction() {
            const btn = document.getElementById('action-btn');
            const amt = parseFloat(document.getElementById('bet-amount').value);

            if (gameStatus === "WAITING" && myBet === 0) {
                if (amt > balance) return;
                balance -= amt;
                myBet = amt;
                updateUI();
                btn.innerText = "–°–¢–ê–í–ö–ê –ü–†–ò–ô–ù–Ø–¢–ê";
                btn.style.background = "#222";
            } else if (gameStatus === "FLYING" && myBet > 0) {
                let win = myBet * currentMult;
                balance += win;
                myBet = 0;
                updateUI();
                btn.innerText = "–ó–ê–ë–†–ê–ù–û: " + win.toFixed(2);
                btn.style.background = "var(--green)";
            }
        }

        // –§–∞–∑–∞ 1: –û—á—ñ–∫—É–≤–∞–Ω–Ω—è (5 —Å–µ–∫—É–Ω–¥)
        function startWaitingPhase() {
            gameStatus = "WAITING";
            timerSeconds = 5;
            myBet = 0;
            currentMult = 1.00;

            document.getElementById('status-text').innerText = "–î–æ –ø–æ—á–∞—Ç–∫—É:";
            document.getElementById('status-text').style.color = "var(--blue)";
            document.getElementById('mult').innerText = timerSeconds.toFixed(1) + "s";
            document.getElementById('mult').style.color = "white";
            document.getElementById('rocket').style.display = "none";
            
            const btn = document.getElementById('action-btn');
            btn.innerText = "–°–¢–ê–í–ö–ê";
            btn.style.background = "var(--blue)";

            let waitInterval = setInterval(() => {
                timerSeconds -= 0.1;
                document.getElementById('mult').innerText = Math.max(0, timerSeconds).toFixed(1) + "s";

                if (timerSeconds <= 0) {
                    clearInterval(waitInterval);
                    startFlyingPhase();
                }
            }, 100);
        }

        // –§–∞–∑–∞ 2: –ü–æ–ª—ñ—Ç
        function startFlyingPhase() {
            gameStatus = "FLYING";
            document.getElementById('status-text').innerText = "–ú–Ω–æ–∂–Ω–∏–∫:";
            document.getElementById('status-text').style.color = "var(--green)";
            const rocket = document.getElementById('rocket');
            rocket.style.display = "block";
            rocket.style.transform = "translate(0,0)";

            let crashAt = (1 + Math.random() * 3 + (Math.random() > 0.7 ? 4 : 0)).toFixed(2);

            gameLoop = setInterval(() => {
                currentMult += 0.01;
                document.getElementById('mult').innerText = currentMult.toFixed(2) + "x";
                
                // –†—É—Ö —Ä–∞–∫–µ—Ç–∏
                let moveX = (currentMult - 1) * 35;
                let moveY = (currentMult - 1) * 50;
                rocket.style.transform = `translate(${moveX}px, -${moveY}px)`;

                if (currentMult >= crashAt) {
                    clearInterval(gameLoop);
                    startCrashPhase(crashAt);
                }
            }, 50);
        }

        // –§–∞–∑–∞ 3: –í–∏–±—É—Ö
        function startCrashPhase(crashPoint) {
            gameStatus = "CRASHED";
            document.getElementById('status-text').innerText = "–í–ò–ë–£–•!";
            document.getElementById('status-text').style.color = "var(--red)";
            document.getElementById('mult').innerText = crashPoint + "x";
            document.getElementById('mult').style.color = "var(--red)";
            document.getElementById('rocket').style.display = "none";

            const btn = document.getElementById('action-btn');
            if (myBet > 0) {
                btn.innerText = "–ü–†–û–ì–†–ê–®";
                btn.style.background = "var(--red)";
            }

            // –î–æ–¥–∞—Ç–∏ –≤ —ñ—Å—Ç–æ—Ä—ñ—é
            const hist = document.getElementById('history');
            const item = document.createElement('div');
            item.className = "hs-item";
            item.innerText = crashPoint + "x";
            hist.prepend(item);

            setTimeout(() => {
                startWaitingPhase();
            }, 3000);
        }
    </script>
</body>
</html>
