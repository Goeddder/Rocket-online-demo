<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Giftup Real-Time üöÄ</title>
    <style>
        :root { --blue: #007aff; --green: #34c759; --red: #ff3b30; --bg: #000; --card: #141416; }
        body { background: #000; color: white; font-family: -apple-system, sans-serif; margin: 0; padding: 0; overflow: hidden; height: 100vh; }
        .stars { position: absolute; width: 100%; height: 100%; background: radial-gradient(1px 1px at 10% 10%, #fff, transparent), radial-gradient(1px 1px at 90% 90%, #fff, transparent); background-size: 200px 200px; opacity: 0.2; }
        .header { padding: 10px 15px; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #1a1a1a; background: #000; position: relative; z-index: 10; height: 50px; box-sizing: border-box; }
        .balance { background: var(--green); color: #000; padding: 5px 12px; border-radius: 20px; font-weight: 800; font-size: 13px; }
        .screen { display: none; height: calc(100vh - 50px); flex-direction: column; position: relative; z-index: 5; }
        .screen.active { display: flex; }

        /* –õ–û–ë–ë–Ü */
        .profile-card { background: var(--card); border-radius: 15px; padding: 15px; border: 1px solid #222; display: flex; align-items: center; gap: 12px; margin: 20px; }
        .avatar { width: 40px; height: 40px; border-radius: 50%; background: var(--blue); display: flex; align-items: center; justify-content: center; font-size: 20px; }
        .game-card { background: var(--card); border-radius: 20px; padding: 30px; border: 1px solid #222; text-align: center; cursor: pointer; margin: 0 20px; }
        .online-status { color: var(--green); font-size: 12px; font-weight: bold; margin-top: 8px; }

        /* –ì–†–ê */
        .history-section { padding: 8px 5px; background: #000; border-bottom: 1px solid #1a1a1a; }
        .history-list { display: flex; gap: 6px; overflow-x: auto; scrollbar-width: none; padding: 0 10px; }
        .hs-item { background: #111; padding: 5px 10px; border-radius: 6px; font-size: 12px; font-weight: bold; color: #555; border: 1px solid #222; }
        .active-tab { background: rgba(0, 122, 255, 0.1); color: var(--blue); border-color: var(--blue); min-width: 50px; text-align: center; }
        .back-btn { margin: 10px 15px; background: #111; border: 1px solid #333; color: #888; padding: 6px 12px; border-radius: 8px; font-size: 11px; width: fit-content; cursor: pointer; }
        .game-viewport { flex-grow: 1; display: flex; align-items: center; justify-content: center; position: relative; }
        #rocket-v { width: 240px; mix-blend-mode: screen; transform: scale(0); transition: transform 0.3s ease; pointer-events: none; }

        .controls { padding: 15px; background: #000; border-top: 1px solid #1a1a1a; }
        input { width: 100%; background: #0a0a0a; border: 1px solid #222; padding: 12px; color: white; border-radius: 10px; font-size: 16px; text-align: center; margin-bottom: 10px; outline: none; }
        .main-btn { width: 100%; padding: 16px; border-radius: 12px; border: none; font-size: 16px; font-weight: 800; color: white; cursor: pointer; text-transform: uppercase; }

        .bets-menu { height: 110px; background: #0a0a0a; border-top: 1px solid #1a1a1a; }
        .bets-title { padding: 6px 15px; font-size: 10px; color: #444; border-bottom: 1px solid #141416; font-weight: bold; }
        .bet-row { display: flex; justify-content: space-between; padding: 10px 15px; font-size: 13px; }
    </style>
</head>
<body>
    <div class="stars"></div>
    <div class="header">
        <div style="font-weight: 900;">GIFTUP</div>
        <div class="balance"><span id="bal-val">500.00</span> ‚Ç¥</div>
    </div>

    <div id="lobby-screen" class="screen active">
        <div class="profile-card">
            <div class="avatar">üë®‚ÄçüöÄ</div>
            <div>
                <div style="font-weight: bold; font-size: 14px;">@tg_player</div>
                <div style="font-size: 10px; color: #555;">ID: 88291044 ‚Ä¢ VERIFIED</div>
            </div>
        </div>
        <div class="game-card" onclick="openGame('rocket-screen')">
            <div style="font-size: 45px; margin-bottom: 10px;">üöÄ</div>
            <h2 style="margin: 0; font-size: 18px;">ROCKET ONLINE</h2>
            <div class="online-status">‚Ä¢ Online</div>
        </div>
    </div>

    <div id="rocket-screen" class="screen">
        <div class="history-section">
            <div class="history-list" id="hs-list">
                <div id="live-tab" class="hs-item active-tab">0.0s</div>
            </div>
        </div>
        <button class="back-btn" onclick="openGame('lobby-screen')">‚Üê –í–ò–ô–¢–ò</button>
        <div class="game-viewport">
            <video id="rocket-v" playsinline muted loop>
                <source src="https://files.catbox.moe/d13y9l.mp4" type="video/mp4">
            </video>
        </div>
        <div class="controls">
            <input type="number" id="bet-amt" value="100">
            <button id="action-btn" class="main-btn" style="background: var(--blue);" onclick="doAction()">–°–¢–ê–í–ö–ê</button>
        </div>
        <div class="bets-menu">
            <div class="bets-title">–í–ê–®–ê –°–¢–ê–í–ö–ê</div>
            <div id="my-bet-container"></div>
        </div>
    </div>

    <script>
        let balance = parseFloat(localStorage.getItem('giftup_bal')) || 500.00;
        let myBet = 0;
        let currentStatus = "WAIT"; // WAIT, FLY, CRASH
        let currentMult = 1.00;
        let isDead = false;

        // –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è: —Ç—Ä–∏–≤–∞–ª—ñ—Å—Ç—å —Ñ–∞–∑
        const WAIT_TIME = 6000; // 6 —Å–µ–∫ –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è
        const FLY_LIMIT = 10000; // –º–∞–∫—Å –ø–æ–ª—ñ—Ç 10 —Å–µ–∫ –¥–ª—è —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—É
        const CRASH_TIME = 3000; // 3 —Å–µ–∫ –∫—Ä–∞—à
        const CYCLE_TOTAL = WAIT_TIME + FLY_LIMIT + CRASH_TIME;

        function updateBal() {
            document.getElementById('bal-val').innerText = balance.toFixed(2);
            localStorage.setItem('giftup_bal', balance);
        }

        function openGame(id) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById(id).classList.add('active');
        }

        // –ì–æ–ª–æ–≤–Ω–∏–π —Ü–∏–∫–ª —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó
        function syncEngine() {
            const now = Date.now();
            const cyclePos = now % CYCLE_TOTAL;
            const tab = document.getElementById('live-tab');
            const rocket = document.getElementById('rocket-v');
            const btn = document.getElementById('action-btn');

            if (cyclePos < WAIT_TIME) {
                // –§–ê–ó–ê –û–ß–Ü–ö–£–í–ê–ù–ù–Ø
                if (currentStatus !== "WAIT") {
                    currentStatus = "WAIT";
                    isDead = false;
                    document.getElementById('my-bet-container').innerHTML = "";
                    rocket.style.transform = "scale(0)";
                    rocket.pause(); rocket.currentTime = 0;
                    btn.style.background = "var(--blue)";
                    btn.innerText = "–°–¢–ê–í–ö–ê";
                }
                let timeLeft = ((WAIT_TIME - cyclePos) / 1000).toFixed(1);
                tab.innerText = timeLeft + "s";
                tab.style.color = "var(--blue)";

            } else if (cyclePos < WAIT_TIME + FLY_LIMIT) {
                // –§–ê–ó–ê –ü–û–õ–¨–û–¢–£
                if (currentStatus !== "FLY") {
                    currentStatus = "FLY";
                    rocket.style.transform = "scale(1)";
                    rocket.style.opacity = "1";
                    rocket.play();
                }
                
                // –ü—Ä–æ—Å—Ç–∞ —Ñ–æ—Ä–º—É–ª–∞ —Ä–æ—Å—Ç—É —ñ–∫—Å–∞ –≤—ñ–¥ —á–∞—Å—É –ø–æ–ª—å–æ—Ç—É
                let timeInFly = (cyclePos - WAIT_TIME) / 1000;
                currentMult = 1.0 + (timeInFly * 0.15); // —Ä—ñ—Å—Ç 0.15 –∑–∞ —Å–µ–∫
                
                // –ï–º—É–ª—è—Ü—ñ—è –∫—Ä–∞—à—É (–¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó –ø—Ä–æ—Å—Ç–æ —Ñ—ñ–∫—Å–æ–≤–∞–Ω–∏–π —á–∞—Å –∞–±–æ –∞–ª–≥–æ—Ä–∏—Ç–º)
                let seed = Math.floor(now / CYCLE_TOTAL);
                let crashAt = 1.1 + ( (seed * 137) % 50 ) / 10; // –¥–µ—Ç–µ—Ä–º—ñ–Ω–æ–≤–∞–Ω–∏–π –∫—Ä–∞—à –¥–ª—è –≤—Å—ñ—Ö

                if (currentMult >= crashAt) {
                    triggerCrash(crashAt);
                } else if (!isDead) {
                    tab.innerText = currentMult.toFixed(2) + "x";
                    tab.style.color = "var(--green)";
                    const liveStatus = document.getElementById('live-bet-status');
                    if(liveStatus && myBet > 0) liveStatus.innerText = currentMult.toFixed(2) + "x";
                }

            } else {
                // –§–ê–ó–ê –ü–Ü–°–õ–Ø –ö–†–ê–®–£ (–ø–∞—É–∑–∞)
                if (currentStatus !== "CRASH") triggerCrash();
            }
        }

        function triggerCrash(val) {
            if (isDead) return;
            currentStatus = "CRASH";
            isDead = true;
            const tab = document.getElementById('live-tab');
            const rocket = document.getElementById('rocket-v');
            const btn = document.getElementById('action-btn');

            rocket.style.opacity = "0";
            tab.style.color = "var(--red)";
            
            if(myBet > 0) {
                const liveStatus = document.getElementById('live-bet-status');
                if(liveStatus) { liveStatus.innerText = "CRASH"; liveStatus.style.color = "var(--red)"; }
                btn.innerText = "–ü–†–û–ì–†–ê–®";
                btn.style.background = "var(--red)";
                myBet = 0;
            }
        }

        function doAction() {
            const btn = document.getElementById('action-btn');
            const amt = parseFloat(document.getElementById('bet-amt').value);

            if (currentStatus === "WAIT" && myBet === 0) {
                if (amt > balance || amt <= 0) return;
                balance -= amt; myBet = amt; updateBal();
                document.getElementById('my-bet-container').innerHTML = `
                    <div class="bet-row">
                        <span>üí∞ ${amt} ‚Ç¥</span>
                        <span id="live-bet-status" style="color:var(--blue); font-weight:bold;">–£ –ì–†–Ü</span>
                    </div>`;
                btn.innerText = "–ü–†–ò–ô–ù–Ø–¢–û";
                btn.style.background = "#222";
            } else if (currentStatus === "FLY" && myBet > 0 && !isDead) {
                let win = myBet * currentMult;
                balance += win; updateBal();
                document.getElementById('my-bet-container').innerHTML = `
                    <div class="bet-row">
                        <span>üí∞ ${myBet} ‚Ç¥</span>
                        <span style="color:var(--green); font-weight:900;">+${win.toFixed(0)} ‚Ç¥</span>
                    </div>`;
                myBet = 0;
                btn.innerText = "WIN: " + win.toFixed(0);
                btn.style.background = "var(--green)";
                btn.style.color = "black";
            }
        }

        setInterval(syncEngine, 50); // –í–∏–∫–ª–∏–∫–∞—î–º–æ –∫–æ–∂–Ω—ñ 50–º—Å –¥–ª—è –ø–ª–∞–≤–Ω–æ—Å—Ç—ñ
        updateBal();
    </script>
</body>
</html>
